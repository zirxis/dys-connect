<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ ÙˆØ§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª - DYS-CONNECT</title>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;500;600;700&family=Amiri:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- Core Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary-red': '#C41E3A',
                        'secondary-red': '#E85A4F',
                        'accent-orange': '#F28B30',
                        'warm-beige': '#F5F1E8',
                        'deep-brown': '#8B4513',
                        'soft-cream': '#FDF6E3',
                        'muted-gold': '#D4AF37',
                        'gentle-gray': '#6C757D'
                    },
                    fontFamily: {
                        'cairo': ['Cairo', 'sans-serif'],
                        'amiri': ['Amiri', 'serif']
                    }
                }
            }
        }
    </script>
    
    <style>
        body {
            font-family: 'Amiri', serif;
            background-color: #F5F1E8;
        }
        
        .chat-container {
            height: calc(100vh - 200px);
            min-height: 500px;
        }
        
        .message-bubble {
            max-width: 70%;
            word-wrap: break-word;
            animation: messageIn 0.3s ease-out;
        }
        
        @keyframes messageIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .message-sent {
            background: linear-gradient(135deg, #C41E3A 0%, #E85A4F 100%);
            color: white;
            margin-left: auto;
        }
        
        .message-received {
            background: white;
            color: #8B4513;
            border: 1px solid #e5e7eb;
        }
        
        .contact-item {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .contact-item:hover {
            background-color: rgba(196, 30, 58, 0.05);
        }
        
        .contact-item.active {
            background-color: rgba(196, 30, 58, 0.1);
            border-right: 4px solid #C41E3A;
        }
        
        .online-indicator {
            width: 8px;
            height: 8px;
            background-color: #10B981;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .typing-indicator {
            display: none;
            animation: typing 1.5s infinite;
        }
        
        @keyframes typing {
            0%, 60%, 100% { opacity: 0.3; }
            30% { opacity: 1; }
        }
        
        .notification-badge {
            background: linear-gradient(135deg, #C41E3A 0%, #E85A4F 100%);
            color: white;
            font-size: 0.75rem;
            min-width: 1.25rem;
            height: 1.25rem;
        }
        
        .search-input {
            transition: all 0.3s ease;
        }
        
        .search-input:focus {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(196, 30, 58, 0.15);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #C41E3A 0%, #E85A4F 100%);
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, #A01729 0%, #D64541 100%);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(196, 30, 58, 0.3);
        }
        
        .message-input {
            transition: all 0.3s ease;
        }
        
        .message-input:focus {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(196, 30, 58, 0.15);
        }
        
        .quick-reply {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .quick-reply:hover {
            transform: scale(1.05);
            background-color: rgba(196, 30, 58, 0.1);
        }
    </style>
</head>
<body class="bg-warm-beige">
    <!-- Navigation -->
    <nav class="bg-white/90 backdrop-blur-sm shadow-lg fixed w-full top-0 z-40">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <a href="index.html" class="text-2xl font-bold text-primary-red font-cairo">DYS-CONNECT</a>
                </div>
                
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="dashboard.html" class="text-deep-brown hover:text-primary-red px-3 py-2 rounded-md text-sm font-medium transition-colors">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</a>
                        <a href="map.html" class="text-deep-brown hover:text-primary-red px-3 py-2 rounded-md text-sm font-medium transition-colors">Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ©</a>
                        <a href="library.html" class="text-deep-brown hover:text-primary-red px-3 py-2 rounded-md text-sm font-medium transition-colors">Ø§Ù„Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø¹Ù„Ù…ÙŠØ©</a>
                        <a href="settings.html" class="text-deep-brown hover:text-primary-red px-3 py-2 rounded-md text-sm font-medium transition-colors">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</a>
                    </div>
                </div>
                
                <div class="md:hidden">
                    <button id="mobile-menu-btn" class="text-deep-brown hover:text-primary-red">
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="pt-16 min-h-screen">
        <!-- Header -->
        <div class="bg-white shadow-sm">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
                <div class="text-center">
                    <h1 class="text-3xl font-bold text-deep-brown font-cairo mb-2">Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ ÙˆØ§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</h1>
                    <p class="text-gentle-gray font-amiri">ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„ØªØ±Ø¨ÙˆÙŠ ÙˆØªØ§Ø¨Ø¹ Ø¢Ø®Ø± Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª</p>
                </div>
            </div>
        </div>

        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
            <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
                <!-- Contacts Sidebar -->
                <div class="lg:col-span-1">
                    <div class="bg-white rounded-2xl shadow-lg h-full">
                        <!-- Search -->
                        <div class="p-4 border-b border-gray-200">
                            <div class="relative">
                                <input type="text" id="contacts-search" placeholder="Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø¬Ù‡Ø© Ø§ØªØµØ§Ù„..."
                                       class="search-input w-full px-4 py-3 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-red focus:border-transparent">
                                <svg class="absolute left-3 top-3.5 h-5 w-5 text-gentle-gray" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                                </svg>
                            </div>
                        </div>
                        
                        <!-- Contacts List -->
                        <div id="contacts-list" class="overflow-y-auto" style="max-height: 400px;">
                            <!-- Contacts will be loaded here -->
                        </div>
                        
                        <!-- Quick Actions -->
                        <div class="p-4 border-t border-gray-200">
                            <button onclick="newConversation()" class="w-full btn-primary text-white py-3 rounded-lg text-sm mb-2">
                                â• Ù…Ø­Ø§Ø¯Ø«Ø© Ø¬Ø¯ÙŠØ¯Ø©
                            </button>
                            <button onclick="createGroup()" class="w-full border border-primary-red text-primary-red hover:bg-primary-red hover:text-white py-3 rounded-lg text-sm transition-colors">
                                ğŸ‘¥ Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø¬Ù…ÙˆØ¹Ø©
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Chat Area -->
                <div class="lg:col-span-3">
                    <div class="bg-white rounded-2xl shadow-lg h-full flex flex-col">
                        <!-- Chat Header -->
                        <div id="chat-header" class="p-4 border-b border-gray-200 flex items-center justify-between">
                            <div class="flex items-center">
                                <div id="current-chat-avatar" class="w-12 h-12 bg-primary-red rounded-full flex items-center justify-center text-white text-xl font-bold mr-3">
                                    ğŸ‘¤
                                </div>
                                <div>
                                    <h3 id="current-chat-name" class="text-lg font-bold text-deep-brown font-cairo">Ø§Ø®ØªØ± Ù…Ø­Ø§Ø¯Ø«Ø© Ù„Ù„Ø¨Ø¯Ø¡</h3>
                                    <p id="current-chat-status" class="text-sm text-gentle-gray font-amiri">Ø§Ø®ØªØ± Ø¬Ù‡Ø© Ø§ØªØµØ§Ù„ Ù„Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©</p>
                                </div>
                            </div>
                            <div class="flex items-center space-x-2">
                                <button onclick="voiceCall()" class="text-gentle-gray hover:text-primary-red p-2">
                                    ğŸ“
                                </button>
                                <button onclick="videoCall()" class="text-gentle-gray hover:text-primary-red p-2">
                                    ğŸ“¹
                                </button>
                                <button onclick="chatInfo()" class="text-gentle-gray hover:text-primary-red p-2">
                                    â„¹ï¸
                                </button>
                            </div>
                        </div>
                        
                        <!-- Messages Area -->
                        <div id="messages-container" class="flex-1 overflow-y-auto p-4">
                            <div id="messages-list" class="space-y-4">
                                <!-- Messages will be loaded here -->
                            </div>
                            
                            <!-- Typing Indicator -->
                            <div id="typing-indicator" class="typing-indicator flex items-center space-x-2 p-3">
                                <div class="w-2 h-2 bg-gentle-gray rounded-full"></div>
                                <div class="w-2 h-2 bg-gentle-gray rounded-full"></div>
                                <div class="w-2 h-2 bg-gentle-gray rounded-full"></div>
                                <span class="text-sm text-gentle-gray font-amiri">ÙŠÙƒØªØ¨ Ø§Ù„Ø¢Ù†...</span>
                            </div>
                        </div>
                        
                        <!-- Message Input -->
                        <div id="message-input-container" class="p-4 border-t border-gray-200">
                            <!-- Quick Replies -->
                            <div id="quick-replies" class="mb-3 flex flex-wrap gap-2 hidden">
                                <div class="quick-reply px-3 py-1 bg-soft-cream text-gentle-gray rounded-full text-sm" onclick="sendQuickReply('Ø´ÙƒØ±Ø§Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª')">
                                    Ø´ÙƒØ±Ø§Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª
                                </div>
                                <div class="quick-reply px-3 py-1 bg-soft-cream text-gentle-gray rounded-full text-sm" onclick="sendQuickReply('Ù…ØªÙ‰ ØªÙƒÙˆÙ† Ø§Ù„Ø¬Ù„Ø³Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©ØŸ')">
                                    Ù…ØªÙ‰ ØªÙƒÙˆÙ† Ø§Ù„Ø¬Ù„Ø³Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©ØŸ
                                </div>
                                <div class="quick-reply px-3 py-1 bg-soft-cream text-gentle-gray rounded-full text-sm" onclick="sendQuickReply('Ù‡Ù„ ÙŠÙ…ÙƒÙ†Ùƒ ØªÙˆØ¶ÙŠØ­ Ø£ÙƒØ«Ø±ØŸ')">
                                    Ù‡Ù„ ÙŠÙ…ÙƒÙ†Ùƒ ØªÙˆØ¶ÙŠØ­ Ø£ÙƒØ«Ø±ØŸ
                                </div>
                                <div class="quick-reply px-3 py-1 bg-soft-cream text-gentle-gray rounded-full text-sm" onclick="sendQuickReply('Ø³Ø£Ù‚ÙˆÙ… Ø¨Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©')">
                                    Ø³Ø£Ù‚ÙˆÙ… Ø¨Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©
                                </div>
                            </div>
                            
                            <div class="flex items-end space-x-3">
                                <button onclick="attachFile()" class="text-gentle-gray hover:text-primary-red p-2">
                                    ğŸ“
                                </button>
                                <div class="flex-1">
                                    <textarea id="message-input" 
                                              placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ..."
                                              class="message-input w-full px-4 py-3 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-primary-red focus:border-transparent"
                                              rows="1"></textarea>
                                </div>
                                <button onclick="sendMessage()" class="btn-primary text-white px-6 py-3 rounded-lg">
                                    Ø¥Ø±Ø³Ø§Ù„
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-deep-brown text-white py-8">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center">
                <div class="text-3xl font-bold text-muted-gold font-cairo mb-4">DYS-CONNECT</div>
                <p class="text-lg font-amiri mb-6">Ù…Ù†ØµØ© Ø¬Ø²Ø§Ø¦Ø±ÙŠØ© Ù„Ù„ØªÙƒÙÙ„ Ø§Ù„Ø°ÙƒÙŠ ÙˆØ§Ù„Ù…Ø¨ÙƒØ± Ø¨Ø§Ù„Ø£Ø·ÙØ§Ù„</p>
                <div class="border-t border-gray-600 pt-6">
                    <p class="text-sm font-amiri">Â© 2025 DYS-CONNECT. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©.</p>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Messaging functionality
        let currentChat = null;
        let contacts = [];
        let messages = {};
        
        // Sample contacts data
        const sampleContacts = [
            { id: 1, name: 'Ø¯. Ø³Ø¹ÙŠØ¯Ø© Ù…Ø­Ù…Ø¯', role: 'Ù…Ø®ØªØµ Ù†ÙØ³ÙŠ', avatar: 'ğŸ‘©â€âš•ï¸', online: true, lastMessage: 'Ø´ÙƒØ±Ø§Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©', time: 'Ù…Ù†Ø° 5 Ø¯Ù‚Ø§Ø¦Ù‚', unread: 2 },
            { id: 2, name: 'Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯', role: 'Ù…Ø¹Ù„Ù… Ù„ØºØ© Ø¹Ø±Ø¨ÙŠØ©', avatar: 'ğŸ§‘â€ğŸ«', online: false, lastMessage: 'Ø³Ø£Ø±Ø³Ù„ Ø§Ù„ØªÙ‚Ø±ÙŠØ± ØºØ¯Ø§Ù‹', time: 'Ù…Ù†Ø° Ø³Ø§Ø¹Ø©', unread: 0 },
            { id: 3, name: 'ÙØ§Ø·Ù…Ø© Ø§Ù„Ø²Ù‡Ø±Ø§Ø¡', role: 'Ø£Ù… Ù„Ø·ÙÙ„ ÙŠØ­ØªØ§Ø¬ Ø¯Ø¹Ù…', avatar: 'ğŸ‘©â€ğŸ‘¦', online: true, lastMessage: 'Ù‡Ù„ ÙŠÙ…ÙƒÙ†Ùƒ Ù…Ø³Ø§Ø¹Ø¯ØªÙŠ ÙÙŠ ÙÙ‡Ù… Ø§Ù„Ù†ØªØ§Ø¦Ø¬ØŸ', time: 'Ù…Ù†Ø° 3 Ø³Ø§Ø¹Ø§Øª', unread: 1 },
            { id: 4, name: 'Ù…Ø¯Ø±Ø³Ø© Ø§Ø¨Ù† Ø®Ù„Ø¯ÙˆÙ†', role: 'Ù…Ø¤Ø³Ø³Ø© ØªØ¹Ù„ÙŠÙ…ÙŠØ©', avatar: 'ğŸ«', online: false, lastMessage: 'ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø·Ù„Ø¨', time: 'Ù…Ù†Ø° ÙŠÙˆÙ…', unread: 0 },
            { id: 5, name: 'Ø¯. ÙŠÙˆØ³Ù Ø§Ù„Ø¨Ø§Ø­Ø«', role: 'Ø¨Ø§Ø­Ø« ÙÙŠ Ø§Ù„ØªØ±Ø¨ÙŠØ©', avatar: 'ğŸ“', online: true, lastMessage: 'Ø£Ø±ØºØ¨ ÙÙŠ Ø§Ù„ØªØ¹Ø§ÙˆÙ† Ø§Ù„Ø¨Ø­Ø«ÙŠ', time: 'Ù…Ù†Ø° ÙŠÙˆÙ…ÙŠÙ†', unread: 3 }
        ];
        
        // Sample messages data
        const sampleMessages = {
            1: [
                { id: 1, sender: 'them', content: 'Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ ÙƒÙŠÙ ÙƒØ§Ù† Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø·ÙÙ„ ÙÙŠ Ø§Ù„Ø¬Ù„Ø³Ø© Ø§Ù„Ø£Ø®ÙŠØ±Ø©ØŸ', time: '10:00 ØµØ¨Ø§Ø­Ø§Ù‹', date: 'Ø§Ù„ÙŠÙˆÙ…' },
                { id: 2, sender: 'me', content: 'Ø§Ù„Ø³Ù„Ø§Ù… Ø¹Ù„ÙŠÙƒÙ…ØŒ ÙƒØ§Ù† Ø£Ø¯Ø§Ø¡Ù‹ Ø¬ÙŠØ¯Ø§Ù‹ ÙˆØªØ­Ø³Ù† Ù…Ù„Ø­ÙˆØ¸ ÙÙŠ Ø§Ù„ØªØ±ÙƒÙŠØ²', time: '10:15 ØµØ¨Ø§Ø­Ø§Ù‹', date: 'Ø§Ù„ÙŠÙˆÙ…' },
                { id: 3, sender: 'them', content: 'Ù…Ù…ØªØ§Ø²! Ù‡Ù„ ÙŠÙ…ÙƒÙ†Ùƒ ØªØ²ÙˆÙŠØ¯ÙŠ Ø¨ØªÙ‚Ø±ÙŠØ± Ù…ÙØµÙ„ØŸ', time: '10:20 ØµØ¨Ø§Ø­Ø§Ù‹', date: 'Ø§Ù„ÙŠÙˆÙ…' },
                { id: 4, sender: 'me', content: 'Ø¨Ø§Ù„Ø·Ø¨Ø¹ØŒ Ø³Ø£Ù‚ÙˆÙ… Ø¨Ø¥Ø¹Ø¯Ø§Ø¯Ù‡ Ø®Ù„Ø§Ù„ Ø§Ù„ÙŠÙˆÙ…', time: '10:25 ØµØ¨Ø§Ø­Ø§Ù‹', date: 'Ø§Ù„ÙŠÙˆÙ…' }
            ],
            2: [
                { id: 1, sender: 'them', content: 'Ø§Ù„Ø³Ù„Ø§Ù… Ø¹Ù„ÙŠÙƒÙ…ØŒ Ø£Ø­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ø§Ø³ØªØ´Ø§Ø±ØªÙƒÙ… ÙÙŠ Ù…ÙˆØ¶ÙˆØ¹', time: '9:00 ØµØ¨Ø§Ø­Ø§Ù‹', date: 'Ø£Ù…Ø³' },
                { id: 2, sender: 'me', content: 'ÙˆØ¹Ù„ÙŠÙƒÙ… Ø§Ù„Ø³Ù„Ø§Ù…ØŒ ØªÙØ¶Ù„ ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒØŸ', time: '9:15 ØµØ¨Ø§Ø­Ø§Ù‹', date: 'Ø£Ù…Ø³' }
            ],
            3: [
                { id: 1, sender: 'them', content: 'Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ Ø£Ø­ØªØ§Ø¬ Ø¥Ù„Ù‰ ØªÙˆØ¶ÙŠØ­ Ø­ÙˆÙ„ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…', time: '2:00 Ù…Ø³Ø§Ø¡Ù‹', date: 'Ø£Ù…Ø³' },
                { id: 2, sender: 'me', content: 'Ù…Ø±Ø­Ø¨Ø§Ù‹ ÙØ§Ø·Ù…Ø©ØŒ Ø¨Ø§Ù„Ø·Ø¨Ø¹ØŒ Ù…Ø§ Ø§Ù„Ø°ÙŠ ØªØ±ÙŠØ¯ÙŠÙ† ØªÙˆØ¶ÙŠØ­Ù‡ØŸ', time: '2:15 Ù…Ø³Ø§Ø¡Ù‹', date: 'Ø£Ù…Ø³' }
            ],
            4: [
                { id: 1, sender: 'them', content: 'ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø·Ù„Ø¨ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­', time: '11:00 ØµØ¨Ø§Ø­Ø§Ù‹', date: 'Ù…Ù†Ø° ÙŠÙˆÙ…ÙŠÙ†' }
            ],
            5: [
                { id: 1, sender: 'them', content: 'Ø£Ø±ØºØ¨ ÙÙŠ Ø§Ù„ØªØ¹Ø§ÙˆÙ† Ù…Ø¹ÙƒÙ… ÙÙŠ Ø¯Ø±Ø§Ø³Ø© Ø¨Ø­Ø«ÙŠØ©', time: '3:00 Ù…Ø³Ø§Ø¡Ù‹', date: 'Ù…Ù†Ø° 3 Ø£ÙŠØ§Ù…' },
                { id: 2, sender: 'me', content: 'ÙÙƒØ±Ø© Ø±Ø§Ø¦Ø¹Ø©! Ù‡Ù„ ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø±Ø³Ø§Ù„ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³Ø©ØŸ', time: '3:20 Ù…Ø³Ø§Ø¡Ù‹', date: 'Ù…Ù†Ø° 3 Ø£ÙŠØ§Ù…' }
            ]
        };
        
        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            contacts = [...sampleContacts];
            messages = { ...sampleMessages };
            
            renderContacts();
            setupEventListeners();
            
            // Auto-select first contact if available
            if (contacts.length > 0) {
                selectContact(contacts[0].id);
            }
        });
        
        function setupEventListeners() {
            // Message input
            const messageInput = document.getElementById('message-input');
            messageInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });
            
            messageInput.addEventListener('input', function() {
                // Auto-resize textarea
                this.style.height = 'auto';
                this.style.height = Math.min(this.scrollHeight, 120) + 'px';
                
                // Show/hide quick replies based on input
                const quickReplies = document.getElementById('quick-replies');
                if (this.value.length === 0) {
                    quickReplies.classList.remove('hidden');
                } else {
                    quickReplies.classList.add('hidden');
                }
            });
            
            // Contacts search
            document.getElementById('contacts-search').addEventListener('input', function() {
                filterContacts(this.value);
            });
        }
        
        function renderContacts() {
            const contactsList = document.getElementById('contacts-list');
            
            contactsList.innerHTML = contacts.map(contact => `
                <div class="contact-item p-4 border-b border-gray-100 ${currentChat === contact.id ? 'active' : ''}" 
                     onclick="selectContact(${contact.id})">
                    <div class="flex items-center">
                        <div class="relative mr-3">
                            <div class="w-12 h-12 bg-primary-red rounded-full flex items-center justify-center text-white text-xl">
                                ${contact.avatar}
                            </div>
                            ${contact.online ? '<div class="online-indicator absolute -top-1 -right-1"></div>' : ''}
                        </div>
                        <div class="flex-1 min-w-0">
                            <div class="flex justify-between items-center mb-1">
                                <h4 class="text-sm font-bold text-deep-brown font-cairo truncate">${contact.name}</h4>
                                <span class="text-xs text-gentle-gray font-amiri">${contact.time}</span>
                            </div>
                            <p class="text-xs text-gentle-gray font-amiri truncate">${contact.role}</p>
                            <p class="text-xs text-gentle-gray font-amiri truncate">${contact.lastMessage}</p>
                        </div>
                        ${contact.unread > 0 ? `
                            <div class="notification-badge flex items-center justify-center rounded-full text-xs">
                                ${contact.unread}
                            </div>
                        ` : ''}
                    </div>
                </div>
            `).join('');
        }
        
        function selectContact(contactId) {
            // Update current chat
            currentChat = contactId;
            
            // Update active state in contacts list
            document.querySelectorAll('.contact-item').forEach(item => {
                item.classList.remove('active');
            });
            event.currentTarget.classList.add('active');
            
            // Update chat header
            const contact = contacts.find(c => c.id === contactId);
            if (contact) {
                document.getElementById('current-chat-name').textContent = contact.name;
                document.getElementById('current-chat-status').textContent = contact.online ? 'Ù…ØªØµÙ„ Ø§Ù„Ø¢Ù†' : 'ØºÙŠØ± Ù…ØªØµÙ„';
                document.getElementById('current-chat-avatar').textContent = contact.avatar;
                
                // Clear unread messages
                contact.unread = 0;
                renderContacts();
            }
            
            // Load messages
            loadMessages(contactId);
            
            // Show/hide input container
            document.getElementById('message-input-container').classList.remove('hidden');
        }
        
        function loadMessages(contactId) {
            const messagesList = document.getElementById('messages-list');
            const contactMessages = messages[contactId] || [];
            
            messagesList.innerHTML = contactMessages.map(message => `
                <div class="message-bubble ${message.sender === 'me' ? 'message-sent' : 'message-received'} p-3 rounded-lg">
                    <p class="text-sm font-amiri mb-1">${message.content}</p>
                    <div class="flex justify-between items-center">
                        <span class="text-xs opacity-75">${message.time}</span>
                        ${message.sender === 'me' ? '<span class="text-xs">âœ“âœ“</span>' : ''}
                    </div>
                </div>
            `).join('');
            
            // Scroll to bottom
            scrollToBottom();
        }
        
        function sendMessage() {
            const messageInput = document.getElementById('message-input');
            const message = messageInput.value.trim();
            
            if (!message || !currentChat) return;
            
            // Add message to messages array
            if (!messages[currentChat]) {
                messages[currentChat] = [];
            }
            
            const newMessage = {
                id: Date.now(),
                sender: 'me',
                content: message,
                time: new Date().toLocaleTimeString('ar-DZ', { hour: '2-digit', minute: '2-digit' }),
                date: 'Ø§Ù„ÙŠÙˆÙ…'
            };
            
            messages[currentChat].push(newMessage);
            
            // Clear input
            messageInput.value = '';
            messageInput.style.height = 'auto';
            
            // Reload messages
            loadMessages(currentChat);
            
            // Update contact last message
            const contact = contacts.find(c => c.id === currentChat);
            if (contact) {
                contact.lastMessage = message.length > 30 ? message.substring(0, 30) + '...' : message;
                contact.time = 'Ø§Ù„Ø¢Ù†';
                renderContacts();
            }
            
            // Simulate typing indicator and response
            setTimeout(() => {
                showTypingIndicator();
                setTimeout(() => {
                    hideTypingIndicator();
                    sendAutoResponse();
                }, 2000);
            }, 1000);
        }
        
        function sendQuickReply(message) {
            document.getElementById('message-input').value = message;
            sendMessage();
        }
        
        function sendAutoResponse() {
            if (!currentChat) return;
            
            const responses = [
                'Ø´ÙƒØ±Ø§Ù‹ Ø¹Ù„Ù‰ Ø±Ø³Ø§Ù„ØªÙƒØŒ Ø³Ø£Ù‚ÙˆÙ… Ø¨Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©',
                'Ù…Ù…ØªØ§Ø²! Ù‡Ù„ ÙŠÙ…ÙƒÙ†Ùƒ ØªÙˆØ¶ÙŠØ­ Ø£ÙƒØ«Ø±ØŸ',
                'ØªÙ…Ø§Ù…ØŒ Ø³Ø£Ù‚ÙˆÙ… Ø¨Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ù„Ø§Ø²Ù…Ø©',
                'Ø´ÙƒØ±Ø§Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…ÙÙŠØ¯Ø©',
                'Ø³Ø£Ø¹ÙˆØ¯ Ø¥Ù„ÙŠÙƒ Ù‚Ø±ÙŠØ¨Ø§Ù‹ Ø¨Ø§Ù„ØªÙØ§ØµÙŠÙ„'
            ];
            
            const randomResponse = responses[Math.floor(Math.random() * responses.length)];
            
            const newMessage = {
                id: Date.now(),
                sender: 'them',
                content: randomResponse,
                time: new Date().toLocaleTimeString('ar-DZ', { hour: '2-digit', minute: '2-digit' }),
                date: 'Ø§Ù„ÙŠÙˆÙ…'
            };
            
            messages[currentChat].push(newMessage);
            loadMessages(currentChat);
            
            // Update contact last message
            const contact = contacts.find(c => c.id === currentChat);
            if (contact) {
                contact.lastMessage = randomResponse;
                contact.time = 'Ø§Ù„Ø¢Ù†';
                renderContacts();
            }
        }
        
        function showTypingIndicator() {
            document.getElementById('typing-indicator').style.display = 'flex';
            scrollToBottom();
        }
        
        function hideTypingIndicator() {
            document.getElementById('typing-indicator').style.display = 'none';
        }
        
        function scrollToBottom() {
            const container = document.getElementById('messages-container');
            container.scrollTop = container.scrollHeight;
        }
        
        function filterContacts(searchTerm) {
            const filteredContacts = sampleContacts.filter(contact => 
                contact.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
                contact.role.toLowerCase().includes(searchTerm.toLowerCase())
            );
            
            contacts = filteredContacts;
            renderContacts();
        }
        
        // Interactive functions
        function newConversation() {
            showNotification('Ø¬Ø§Ø±ÙŠ ÙØªØ­ Ù†Ù…ÙˆØ°Ø¬ Ù…Ø­Ø§Ø¯Ø«Ø© Ø¬Ø¯ÙŠØ¯Ø©...', 'info');
        }
        
        function createGroup() {
            showNotification('Ø¬Ø§Ø±ÙŠ ÙØªØ­ Ù†Ù…ÙˆØ°Ø¬ Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø¬Ù…ÙˆØ¹Ø©...', 'info');
        }
        
        function voiceCall() {
            if (!currentChat) {
                showNotification('ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø¬Ù‡Ø© Ø§ØªØµØ§Ù„ Ø£ÙˆÙ„Ø§Ù‹', 'error');
                return;
            }
            showNotification('Ø¬Ø§Ø±ÙŠ Ø¥Ø¬Ø±Ø§Ø¡ Ù…ÙƒØ§Ù„Ù…Ø© ØµÙˆØªÙŠØ©...', 'info');
        }
        
        function videoCall() {
            if (!currentChat) {
                showNotification('ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø¬Ù‡Ø© Ø§ØªØµØ§Ù„ Ø£ÙˆÙ„Ø§Ù‹', 'error');
                return;
            }
            showNotification('Ø¬Ø§Ø±ÙŠ Ø¥Ø¬Ø±Ø§Ø¡ Ù…ÙƒØ§Ù„Ù…Ø© ÙÙŠØ¯ÙŠÙˆ...', 'info');
        }
        
        function chatInfo() {
            if (!currentChat) {
                showNotification('ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù…Ø­Ø§Ø¯Ø«Ø© Ø£ÙˆÙ„Ø§Ù‹', 'error');
                return;
            }
            showNotification('Ø¬Ø§Ø±ÙŠ ÙØªØ­ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©...', 'info');
        }
        
        function attachFile() {
            showNotification('Ø¬Ø§Ø±ÙŠ ÙØªØ­ Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø±ÙØ§Ù‚ Ù…Ù„Ù...', 'info');
        }
        
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `fixed top-20 right-4 px-6 py-3 rounded-lg shadow-lg z-50 ${
                type === 'success' ? 'bg-green-500 text-white' :
                type === 'error' ? 'bg-red-500 text-white' :
                'bg-blue-500 text-white'
            }`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            // Animate in
            anime({
                targets: notification,
                translateX: [-300, 0],
                opacity: [0, 1],
                duration: 300,
                easing: 'easeOutQuad'
            });
            
            // Remove after delay
            setTimeout(() => {
                anime({
                    targets: notification,
                    translateX: [0, -300],
                    opacity: [1, 0],
                    duration: 300,
                    easing: 'easeInQuad',
                    complete: () => notification.remove()
                });
            }, 3000);
        }
    </script>
</body>
</html>